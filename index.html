<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SAMMY TOWING INC â€” Transport Manager v14</title>

  <link rel="stylesheet" href="styles.css" />

  <!-- jsPDF -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
</head>

<body>
  <!-- ===== HEADER ===== -->
  <header class="topbar">
    <div class="brand">
      <div class="logo">ST</div>
      <div class="title">SAMMY TOWING INC</div>
    </div>
    <button id="logoutBtn">Salir</button>
  </header>

  <!-- ===== NAVEGACIÃ“N ===== -->
  <nav class="tabs">
    <button data-tab="proveedores">Proveedores</button>
    <button data-tab="choferes">Choferes</button>
    <button data-tab="millas">Millas</button>
    <button data-tab="cierres">Cierre Semanal</button>
    <button data-tab="retenciones">Retenciones 10%</button>
    <button data-tab="deducciones">Deducciones Proveedores</button>
    <button data-tab="pagos">Pagos Choferes</button>
    <button data-tab="flujo">Flujo de Caja</button>
    <button data-tab="config">ConfiguraciÃ³n</button>
  </nav>

  <!-- ===== FILTROS GLOBALES (aplican a Millas/Cierre/Retenciones/Deducciones/Pagos/Flujo) ===== -->
  <section class="globalFilters" id="globalFilters">
    <div class="gf">
      <label>Desde</label>
      <input type="date" id="fDesde">
    </div>
    <div class="gf">
      <label>Hasta</label>
      <input type="date" id="fHasta">
    </div>
    <div class="gf">
      <label>Buscar</label>
      <input type="text" id="fBuscar" placeholder="Chofer o Proveedor">
    </div>
    <div class="gf gfBtns">
      <button id="fAplicar" type="button">Aplicar</button>
      <button id="fLimpiar" type="button">Limpiar</button>
    </div>
  </section>

  <!-- ===== CONTENIDO PRINCIPAL ===== -->
  <main>

    <!-- === Proveedores === -->
    <section id="proveedores" class="tab">
      <h2>GestiÃ³n de Proveedores</h2>
      <form id="formProveedor">
        <input id="provNombre" placeholder="Nombre del proveedor" required />
        <input id="provPorc" type="number" step="0.01" placeholder="% DeducciÃ³n" required />
        <button type="submit">AÃ±adir</button>
      </form>
      <table id="tablaProveedores"></table>
    </section>

    <!-- === Choferes === -->
    <section id="choferes" class="tab hidden">
      <h2>GestiÃ³n de Choferes</h2>
      <form id="formChofer">
        <input id="chNombre" placeholder="Nombre del chofer" required />
        <input id="chGanancia" type="number" step="0.01" placeholder="% Ganancia" required />
        <input id="chDeduccion" type="number" step="0.01" placeholder="% DeducciÃ³n" required />
        <button type="submit">AÃ±adir</button>
      </form>
      <table id="tablaChoferes"></table>
    </section>

    <!-- === Millas === -->
    <section id="millas" class="tab hidden">
      <h2>Registro de Millas Recorridas</h2>
      <div id="millasKPI" class="kpi">
        <div class="kpiCard" id="kpiMillas"><h3>ðŸ§­ Total Millas</h3><p>0</p></div>
        <div class="kpiCard" id="kpiServicios"><h3>ðŸ“‹ Servicios</h3><p>0</p></div>
        <div class="kpiCard" id="kpiValor"><h3>ðŸ’µ Valor Total</h3><p>$0.00</p></div>
      </div>

      <div class="filters">
        <select id="filtroChofer"><option value="">Filtrar por Chofer</option></select>
        <select id="filtroProveedor"><option value="">Filtrar por Proveedor</option></select>
        <button id="btnMostrarTodo" type="button">Mostrar Todo</button>
      </div>

      <form id="formMillas">
        <!-- NUEVO: Fecha del servicio (clave para filtros desde/hasta) -->
        <input id="mFecha" type="date" required />

        <select id="mChofer" required><option value="">Seleccionar Chofer</option></select>
        <select id="mProveedor" required><option value="">Seleccionar Proveedor</option></select>
        <input id="mMillas" type="number" placeholder="Millas recorridas" required />
        <button type="submit">Registrar</button>
      </form>

      <table id="tablaMillas"></table>
    </section>

    <!-- === Cierre Semanal === -->
    <section id="cierres" class="tab hidden">
      <h2>Cierre Semanal</h2>
      <div id="tablaCierres"></div>
      <button id="pdfCierre" type="button">Exportar Cierre PDF</button>
    </section>

    <!-- === Retenciones 10% === -->
    <section id="retenciones" class="tab hidden">
      <h2>Retenciones 10% por Chofer</h2>
      <div id="tablaRetenciones"></div>
      <button id="pdfRetenciones" type="button">Exportar Retenciones PDF</button>
    </section>

    <!-- === Deducciones a Proveedores === -->
    <section id="deducciones" class="tab hidden">
      <h2>Deducciones a Proveedores</h2>
      <div id="tablaDeducciones"></div>
      <button id="pdfDeducciones" type="button">Exportar Deducciones PDF</button>
    </section>

    <!-- === Pagos a Choferes === -->
    <section id="pagos" class="tab hidden">
      <h2>Pagos a Choferes</h2>
      <div id="tablaPagos"></div>
      <button id="pdfPagos" type="button">Exportar Pagos PDF</button>
    </section>

    <!-- === Flujo de Caja === -->
    <section id="flujo" class="tab hidden">
      <h2>Flujo de Caja</h2>
      <div id="tablaFlujo"></div>
    </section>

    <!-- === ConfiguraciÃ³n === -->
    <section id="config" class="tab hidden">
      <h2>ConfiguraciÃ³n General</h2>
      <div class="configBox">
        <label>Logo del Negocio:</label>
        <input id="logoInput" type="file" accept="image/png,image/jpeg" />

        <label>PIN de Seguridad:</label>
        <input id="pinInput" type="password" placeholder="****" />

        <label>Valor por milla ($):</label>
        <input id="valorMillaInput" type="number" step="0.01" placeholder="1.00" />

        <label>Umbral Alto ($):</label>
        <input id="umbralAlto" type="number" step="0.01" placeholder="1000" />

        <label>Umbral Medio ($):</label>
        <input id="umbralMedio" type="number" step="0.01" placeholder="400" />

        <button id="saveConfig" type="button">Guardar ConfiguraciÃ³n</button>
        <button id="backupAll" type="button">Backup General</button>
      </div>
    </section>

  </main>

  <script src="app.js"></script>
</body>
</html>
